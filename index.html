<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Programming Memo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Programming Memo">
<meta property="og:url" content="http://katsuobushifpga.github.io/index.html">
<meta property="og:site_name" content="Programming Memo">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Programming Memo">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Programming Memo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Programming Memo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="q" value="site:http://katsuobushifpga.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2015-04-25" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/25/2015-04-25/" class="article-date">
  <time datetime="2015-04-25T08:26:41.000Z" itemprop="datePublished">2015-04-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/25/2015-04-25/">2015-04-25</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="OCaml入門">OCaml入門</h3><p> 今回は,「OCaml」という言語の基礎を学びたいと思います.  </p>
<h3 id="なぜOCamlか?">なぜOCamlか?</h3><p>「プログラミングの基礎」という本に書かれている言語が「OCaml」だったからです.<br>特に深い理由はありません.<br>Haskellで書かれていたらHaskellの記事になってましたし,<br>LispならLispにしてました.</p>
<h3 id="言語の概要">言語の概要</h3><p>はじめに,OCamlについて簡単に紹介しておきましょう.<br>以下はWikipediaからの引用です.<br><blockquote><p>OCaml（オーキャムル、オーキャメル）は、フランスの INRIA が開発したプログラミング言語MLの方言とその実装である。<br>MLの各要素に加え、オブジェクト指向的要素の追加が特長である。かつては Objective Caml という名前で、<br>その略として OCaml と広く呼ばれていたが、正式に OCaml に改名された。</p>
<footer><strong>wikipedia</strong><cite><a href="http://ja.wikipedia.org/wiki/OCaml" target="_blank" rel="external">OCaml</a></cite></footer></blockquote><br>ふむふむ。なるほど。<br>どうやら、MLというプログラミング言語が作られた後に、方言として出来たということでしょうか。<br>Lispなどの言語と、経緯が少しにている感じですね。</p>
<p>さて、言語の特徴を見てます。<br>下記の引用はMLの項目からですが,OCamlの主な特徴が書かれています.<br><blockquote><p>ML（えむえる、Meta-Language）は、関数型言語のひとつである。<br>現代風の関数型言語としては歴史が古いほうで、型推論機能などを持つが、<br>デフォルトの評価戦略は遅延評価ではなく先行評価で、書き換えが可能なレコード型を持つなど、<br>いわゆる「純粋関数型」でない特徴や機能を持つ。</p>
<footer><strong>wikipedia</strong><cite><a href="http://ja.wikipedia.org/wiki/ML" target="_blank" rel="external">ML</a></cite></footer></blockquote></p>
<p>Haskellなどとは違って,評価戦略は先行評価らしいですね。<br>関数型言語の特徴として,</p>
<ul>
<li>破壊的代入ができない</li>
<li>参照透明性</li>
<li>遅延評価</li>
<li>高階関数</li>
</ul>
<p>などなどがあげられますが,言語によって,異なる場合も多々ありますね.<br>また、遅延評価だと,評価される部分がわかりにくいというデメリットがある反面,<br>評価を遅らせて,正格評価では計算出来ないような式を計算可能にするなど（例:無限リスト）<br>のようなメリットも有ります.</p>
<h3 id="Hello,World">Hello,World</h3><p>さて,ここでは,OCamlに入門してみます.<br>処理系に関しては,<a href="http://ocaml.jp/" target="_blank" rel="external">OCaml.jp</a>のインストール方法を参照してください.<br>ちなみに,私はWindows,Linuxで環境を構築してみましたが,Linuxの方が簡単ですので,<br>Linuxをお持ちであれば,そちらをおすすめします.</p>
<p>さて,処理系のインストールは終わりましたでしょうか.<br>まずは,コマンドラインで<br>ocaml<br>と打ちましょう.<br>すると,<a href="http://ja.wikipedia.org/wiki/インタプリタ" target="_blank" rel="external">インタプリタ</a>が起動します.</p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-----------------------------</span><br><span class="line">    <span class="type">OCaml</span> <span class="type">Version</span> <span class="number">4.01</span>.<span class="number">0</span></span><br><span class="line"></span><br><span class="line">#</span><br></pre></td></tr></table></figure>
<p>このような画面になりましたか.<br>なっていたならば次に進みます.</p>
<p>まずは,変数を宣言してみましょう.以下が構文です.<br><figure class="highlight ocaml"><figcaption><span>変数の宣言</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [変数名] = [値]</span><br></pre></td></tr></table></figure></p>
<figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">let</span> a = <span class="number">1</span> ;;</span><br></pre></td></tr></table></figure>
<p>このように打ち,エンターキーを押しましょう.<br>すると,以下が返ってきます.<br><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> a : <span class="built_in">int</span> = <span class="number">1</span></span><br></pre></td></tr></table></figure><br>これは, a という int 型の 変数を宣言し, 値(val)は1である　ということです.<br>aがint型であるということを知っているのは,型推論の力です.</p>
<p>さて,ではaの値を変更してみましょう.<br><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># a = <span class="number">2</span> ;;</span><br></pre></td></tr></table></figure><br>を打ちます.</p>
<p>さて,返ってきたのは,<br>val a : int = 2;でしょうか.<br><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- : <span class="built_in">bool</span> = <span class="literal">false</span></span><br></pre></td></tr></table></figure><br>あれ？<br>a の値を変更しているのではなく,比較演算をしている?</p>
<p>これは,OCamlの変数は,破壊的代入が不可能なため,<br>=を代入ではなく,比較演算子として利用しているからである.<br>let式においては,値を変数に,束縛しているからだ.</p>
<p>さて,変数の定義よりも前に,やっておくべきことがありました.<br>以下を打ちましょう.<br><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># print_string <span class="string">"Hello,World"</span>;;</span><br></pre></td></tr></table></figure><br>結果<br><figure class="highlight ocaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Hello</span>,<span class="type">World</span>- : <span class="built_in">unit</span> = <span class="literal">()</span></span><br></pre></td></tr></table></figure></p>
<p>となります.<br>unitは,値を返さない戻り値です.(他言語のvoid)</p>
<p>それでは,本日はここまで！<br>次回は,関数の定義から,プログラミングコンテストの問題を解きたいと思います.</p>
<h4 id="参考文献">参考文献</h4><p><a href="http://qiita.com/szktty/items/05cb2b754c88fbacc274#3-17" target="_blank" rel="external">OCaml の記号あれこれ</a><br><a href="http://ocaml.jp/破壊的代入" target="_blank" rel="external">OCaml.jp-破壊的代入</a><br><a href="http://www.math.nagoya-u.ac.jp/~garrigue/lecture/tsukuba06/tsukuba.pdf" target="_blank" rel="external">講義メモ</a><br><a href="http://www.geocities.jp/m_hiroi/func/ocaml08.html" target="_blank" rel="external">お気楽OCamlプログラミング入門</a><br><a href="http://www.ueda.info.waseda.ac.jp/~sakai/ocaml/ocamlmemo.html" target="_blank" rel="external">OCaml備忘録</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://katsuobushifpga.github.io/2015/04/25/2015-04-25/" data-id="ci8wsdq5t0003ngjjqqku21d0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OCaml/">OCaml</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2015-03-23" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/23/2015-03-23/" class="article-date">
  <time datetime="2015-03-23T11:52:52.000Z" itemprop="datePublished">2015-03-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/23/2015-03-23/">電光掲示板をenchant.jsでつくろう</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="はじめに">はじめに</h4><p>この記事は,「<a href="https://github.com/katsuobushiFPGA/Denkokeijiban" target="_blank" rel="external">Denkokeijiban</a>」の技術解説記事です.</p>
<h4 id="完成予想図">完成予想図</h4><p>完成した後の,デモが<a href="https://katsuobushifpga.github.io/Denkokeijiban/index.html" target="_blank" rel="external">コチラ</a>になります.</p>
<h4 id="準備">準備</h4><ol>
<li><a href="http://enchantjs.com/ja/" target="_blank" rel="external">enchant.js</a>をダウンロードします.</li>
<li>電光掲示板のドットなる部分を作成します.(ここでは,<a href="https://github.com/katsuobushiFPGA/Denkokeijiban/blob/master/onoff.png" target="_blank" rel="external">リポジトリにあるもの</a>を使います.)</li>
</ol>
<p>※NetBeansやEclipse,IntelliJIDEAなどの統合開発環境があると,開発効率が良くなります.<br>TeraPadやメモ帳,Vim,Emacs,sublimeTextなどのエディタのみでも開発できますので,お好みでどうぞ.</p>
<h4 id="プロジェクトのディレクトリ構造">プロジェクトのディレクトリ構造</h4><p>特に分けない場合は,projectディレクリを作成後,直下に置きましょう.<br>分ける場合は,以下のようにしましょう.</p>
<p>project/<br>　├ js/<br>　├ img/<br>　├ lib/<br>  └ index.html</p>
<p>js …JavaScriptの自作ソースを配置(dotmatrix.js)<br>img…素材となる画像を配置(onoff.png)<br>lib…外部で使うライブラリを配置(enchant.js)<br>index.html…jsを読み込む</p>
<h4 id="原理・仕組み">原理・仕組み</h4><p>ソースを作成する前に,電光掲示板がどのように動くかを知る必要があります.</p>
<h5 id="文字表示">文字表示</h5><p>下の画像は16×16のドット文字です.</p>
<p><img src="2015/03/23/2015-03-23/ch1.png" alt="デルタ文字" title="デモ文字1">  </p>
<p>これを表示させるには,どうすればよいか.<br>以下の画像のように,16×1のパターンに分割してみるとできそうです.</p>
<p><img src="2015/03/23/2015-03-23/ch1_split.png" alt="ビットパターン" title="デモ文字分割">  </p>
<p>縦を16bitと考えると,ON/OFFを1/0で考えることが出来ます.<br>そのため,上の画像では,上から並べると[0,1,1,0,0,0,0,0,0,0,0,0,0,1,0,0]となります.<br>これを見ると,パターン化できそうですね.<br>この考え方で,先ほどのデルタ文字（16×16）に適用します.<br>すると,以下の様な配列が作れます.<br>[0x0000,0x2000,0x3800,0x2e00,0x23c0,0x2070,0x201c,0x2006,0x201c,0x2070,0x23c0,0x2e00,0x3800,0x2000,0x0000,0x0000]<br>これが表示する文字パターンです.</p>
<h5 id="スクロール">スクロール</h5><p>スクロールはenchant.jsを使えば,実装は容易です.<br>今表示している状態から,先頭の配列を削除し,次に表示する配列を末尾に追加するだけです.</p>
<p>詳しいことは,ソースコードの説明時に記載します.</p>
<p>電光掲示板の原理が,だいたいわかったところでソースコードを作成します.</p>
<p>※ハードウェアで製作する場合は,「ダイナミック点灯」などを意識する必要があります.<br>本プログラムでは,ソフトウェアのみで実装しているので,ハードウェア特有の実装はしていません.</p>
<h4 id="機能">機能</h4><p>ユーザの入力によって,自作の電光掲示板に文字を出力する.</p>
<h4 id="設計">設計</h4><p>ソースコードを作成にとりかかりたいところですが,具体的にどういう関数があると良いかを考えます.</p>
<p>機能から,考えると以下の手順になりそうです.</p>
<ol>
<li>ユーザから文字を受け取る.</li>
<li>受け取った文字を,用意している文字パターンと照合する.<br>(受け取った文字を文字パターン配列に変換)</li>
<li>文字パターンを16進数から2進数に変換する.(データを扱いやすくするため)</li>
<li>パターンを読み出し,電光掲示板に出力する.</li>
</ol>
<p>※追加で必要なもの…16×16の文字パターン表<br>(用意がなければ,<a href="https://github.com/katsuobushiFPGA/Denkokeijiban/blob/master/dotmatrix2.js" target="_blank" rel="external">リポジトリのもの</a>を使いましょう.)</p>
<h4 id="各ソースの作成">各ソースの作成</h4><h5 id="クラスの作成">クラスの作成</h5><p>以下をクラス化する.</p>
<ul>
<li>1ドット</li>
<li>フィールド</li>
</ul>
<p>ソース<br><figure class="highlight actionscript"><figcaption><span>Data Class</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Data = Class.create(Sprite,&#123;</span><br><span class="line">          initialize: <span class="function"><span class="keyword">function</span><span class="params">()</span></span><br><span class="line">          </span>&#123;</span><br><span class="line">              Sprite.call(<span class="keyword">this</span>,<span class="number">32</span>,<span class="number">32</span>); <span class="comment">//スプライトの初期化 </span></span><br><span class="line">              <span class="keyword">this</span>.frame=<span class="number">0</span>;</span><br><span class="line">              <span class="keyword">this</span>.x=<span class="number">0</span>;</span><br><span class="line">              <span class="keyword">this</span>.y=<span class="number">0</span>;</span><br><span class="line">              <span class="keyword">this</span>.image = game.assets[<span class="string">'onoff.png'</span>]; <span class="comment">//画像の指定</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="keyword">set</span>:<span class="function"><span class="keyword">function</span><span class="params">(num)</span></span><br><span class="line">          </span>&#123;</span><br><span class="line">              <span class="keyword">this</span>.frame= num;</span><br><span class="line">          &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>データクラスは1ドットを表す.<br>スプライトと呼ばれる画像をもたせている.<br>また,on/off状態はframeという変数で切り替えられる.(enchant.js参照)<br>状態を切り替えるための,setメソッドを持つ.</p>
<figure class="highlight javascript"><figcaption><span>Filed Class</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">Field = Class.create(Sprite,&#123;</span><br><span class="line">    initialize:<span class="function"><span class="keyword">function</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.counter=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.field = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">16</span>);</span><br><span class="line">        <span class="comment">/* 2次元配列の作成 */</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">this</span>.field[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">48</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* 2次元配列の値を代入*/</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>.field.length;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;<span class="keyword">this</span>.field[i].length;j++)&#123;</span><br><span class="line">                <span class="keyword">this</span>.field[i][j]=<span class="keyword">new</span> Data();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.show();</span><br><span class="line">    &#125;,</span><br><span class="line">    show:<span class="function"><span class="keyword">function</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> i,j;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">48</span>;j++)&#123;</span><br><span class="line">              game.rootScene.addChild(<span class="keyword">this</span>.field[i][j]);</span><br><span class="line">              <span class="keyword">this</span>.field[i][j].x = <span class="number">32</span>*j;</span><br><span class="line">              <span class="keyword">this</span>.field[i][j].y = <span class="number">32</span>*i;</span><br><span class="line">            &#125;</span><br><span class="line">            j=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">this</span>.field[i][j].y = <span class="number">32</span>*i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    setValue:<span class="function"><span class="keyword">function</span><span class="params">(x,y,value)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.field[x][y].set(value);</span><br><span class="line">    &#125;,</span><br><span class="line">    setColumn:<span class="function"><span class="keyword">function</span><span class="params">(column,array)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">15</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">          <span class="keyword">this</span>.setValue(i,column,array[<span class="number">15</span>-i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//次のstepに遷移する。</span></span><br><span class="line">    step:<span class="function"><span class="keyword">function</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shiftField(<span class="string">"left"</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//フィ-ルド配列をシフト</span></span><br><span class="line">    shiftField:<span class="function"><span class="keyword">function</span><span class="params">(which)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> tmp=<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">16</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">            tmp[i] =<span class="keyword">new</span> Data();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(which==<span class="string">"left"</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">                    <span class="keyword">this</span>.field[i].shift();</span><br><span class="line">                    <span class="keyword">this</span>.addFinalArray();</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(which==<span class="string">"right"</span>)&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//末尾にオブジェクト配列を追加する。</span></span><br><span class="line">    addFinalArray:<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">this</span>.field[i].push(<span class="keyword">new</span> Data());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//末尾の配列を変える。</span></span><br><span class="line">    changeFinalArray:<span class="function"><span class="keyword">function</span><span class="params">(array)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">this</span>.setColumn(<span class="number">47</span>,array);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Filedクラスは,電光掲示板を表す.<br>作成したフィールドは,3文字表示をさせるため,16*48の２次元配列をもつ.</p>
<p>メソッド</p>
<ul>
<li>show … 電光掲示板を画面に出力する</li>
<li>setValue … xとy(位置)を指定し,on/offの状態を設定する.</li>
<li>setColumn … column(列番号)とarray(配列)を受け取り,arrayパターンと同様の値を設定する.</li>
<li>step … 電光掲示板をスクロールさせる.</li>
<li>shiftFiled … フィールドをシフト(左か右)させる.</li>
<li>addFinalArray … 2次元配列の末尾に空の配列を追加する.</li>
<li>changeFinalArray … 末尾配列を引数の配列にする.</li>
</ul>
<h4 id="関数の作成">関数の作成</h4><p>以下の関数を作成する.<br>(抽象的な関数は,上位の方である)<br>—-上位モジュール —-</p>
<ul>
<li>文字列を16進数の配列に変換する.2次元配列を返す. (stringPatternEncode)</li>
<li>文字列を文字パターン配列に変換する.(characterPattern)</li>
<li>ユーザから受け取った文字列を数値に変換し,その配列を返す.(pickUp)</li>
<li>16進数を2進数に変換し,配列にしその値を返す.(decode16to2)</li>
<li>16進数を2進数に変換し,文字列を返す.(decode)</li>
<li>4bitの文字列に変換する(数値で扱うと,値が丸められる場合がある)  (addZero)</li>
</ul>
<p>—-下位モジュール —-</p>
<p>これらの関数の実装は,簡素になっているため説明は省略する.</p>
<p>続いてメインソースである.</p>
<figure class="highlight php"><figcaption><span>メインソース</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">enchant();</span><br><span class="line"><span class="keyword">var</span> game;</span><br><span class="line"><span class="comment">/*</span><br><span class="line"> * Core</span><br><span class="line"> * -rootScene</span><br><span class="line"> * --Sprite</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line">window.onload = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">  game = <span class="keyword">new</span> Game(<span class="number">1536</span>,<span class="number">512</span>);</span><br><span class="line">  <span class="comment">//fps</span></span><br><span class="line">   game.fps=<span class="number">30</span>;</span><br><span class="line">  <span class="comment">//事前読み込み</span></span><br><span class="line">  game.preload(<span class="string">"onoff.png"</span>);</span><br><span class="line">  <span class="comment">// ゲームの背景色を白に設定</span></span><br><span class="line">  game.rootScene.backgroundColor = <span class="string">"white"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span><br><span class="line"> * メイン動作</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line">    game.onload=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">var</span> field1  = <span class="keyword">new</span> Field();</span><br><span class="line">      <span class="comment">//ユーザー文字入力</span></span><br><span class="line">      <span class="keyword">var</span> string=<span class="string">"λωθΔ∇＝２ｘ＋３４"</span>;  </span><br><span class="line">      </span><br><span class="line">      <span class="comment">/* string必要なもの*/</span></span><br><span class="line">      <span class="keyword">var</span> <span class="keyword">array</span>=<span class="keyword">new</span> <span class="keyword">Array</span>();</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i &lt; string.length;i++)&#123;</span><br><span class="line">            <span class="keyword">array</span>[i] = <span class="keyword">new</span> <span class="keyword">Array</span>(<span class="number">16</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">array</span> = stringPatternEncode(string);</span><br><span class="line">      <span class="comment">/* string--終了 */</span></span><br><span class="line">      </span><br><span class="line">      <span class="keyword">var</span> i=<span class="number">0</span>;</span><br><span class="line">      <span class="keyword">var</span> index=<span class="number">0</span>;</span><br><span class="line">      console.log(<span class="keyword">array</span>.length);</span><br><span class="line">      game.rootScene.addEventListener(<span class="string">'enterframe'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;   </span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">16</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(i==<span class="number">15</span>)&#123;</span><br><span class="line">                        i=<span class="number">0</span>;</span><br><span class="line">                        index++;</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">array</span>.length==index)&#123;</span><br><span class="line">                            field1.show();</span><br><span class="line">                            field1.step();</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        field1.show();</span><br><span class="line">                        field1.changeFinalArray(arrayConvert(<span class="keyword">array</span>[index],i));</span><br><span class="line">                        field1.step();</span><br><span class="line">                        i++;</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;</span><br><span class="line">      &#125;);    </span><br><span class="line">    &#125;;<span class="comment">//game</span></span><br><span class="line">      game.start();</span><br><span class="line"> &#125;;</span><br></pre></td></tr></table></figure>
<p>メインソースはenchant.js特有の記述が多くなるため,その知識が必要となる.</p>
<p>game.onloadは,gameがはじまったときに,動作する関数である.(main関数)<br>関数は </p>
<ol>
<li>fieldを生成</li>
<li>user文字を変数に格納</li>
<li>stringPatternEncode関数によって,ユーザ入力文字を２次元配列に変換する.</li>
<li>addEventLister(‘enterFrame(毎フレーム実行されるイベント)’)にて,毎フレーム呼びださる関数を生成する.<br>function() 以下に記述したプログラムが動作する.</li>
<li>function()以下は,スクロールさせるようなプログラムを記述している.</li>
</ol>
<p>一部ソースを掲載する.<br>全ソースはGitHubの<a href="https://github.com/katsuobushiFPGA/Denkokeijiban" target="_blank" rel="external">リポジトリ</a>を参照<br><figure class="highlight javascript"><figcaption><span>一部ソース</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br></pre></td><td class="code"><pre><span class="line">enchant();</span><br><span class="line"><span class="keyword">var</span> game;</span><br><span class="line"><span class="comment">/*</span><br><span class="line"> * Core</span><br><span class="line"> * -rootScene</span><br><span class="line"> * --Sprite</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">  game = <span class="keyword">new</span> Game(<span class="number">1536</span>,<span class="number">512</span>);</span><br><span class="line">  <span class="comment">//fps</span></span><br><span class="line">   game.fps=<span class="number">30</span>;</span><br><span class="line">  <span class="comment">//事前読み込み</span></span><br><span class="line">  game.preload(<span class="string">"onoff.png"</span>);</span><br><span class="line">  <span class="comment">// ゲームの背景色を白に設定</span></span><br><span class="line">  game.rootScene.backgroundColor = <span class="string">"white"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span><br><span class="line"> * メイン動作</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line">    game.onload=<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">      <span class="keyword">var</span> field1  = <span class="keyword">new</span> Field();</span><br><span class="line">      <span class="comment">//ユーザー文字入力</span></span><br><span class="line">      <span class="keyword">var</span> string=<span class="string">"λωθΔ∇＝２ｘ＋３４"</span>;  </span><br><span class="line">      </span><br><span class="line">      <span class="comment">/* string必要なもの*/</span></span><br><span class="line">      <span class="keyword">var</span> array=<span class="keyword">new</span> <span class="built_in">Array</span>();</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i &lt; string.length;i++)&#123;</span><br><span class="line">            array[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">16</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      array = stringPatternEncode(string);</span><br><span class="line">      <span class="comment">/* string--終了 */</span></span><br><span class="line">      </span><br><span class="line">      <span class="keyword">var</span> i=<span class="number">0</span>;</span><br><span class="line">      <span class="keyword">var</span> index=<span class="number">0</span>;</span><br><span class="line">      <span class="built_in">console</span>.log(array.length);</span><br><span class="line">      game.rootScene.addEventListener(<span class="string">'enterframe'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;   </span><br><span class="line">            <span class="keyword">if</span>(i&lt;<span class="number">16</span>)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(i==<span class="number">15</span>)&#123;</span><br><span class="line">                        i=<span class="number">0</span>;</span><br><span class="line">                        index++;</span><br><span class="line">                    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(array.length==index)&#123;</span><br><span class="line">                            field1.show();</span><br><span class="line">                            field1.step();</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        field1.show();</span><br><span class="line">                        field1.changeFinalArray(arrayConvert(array[index],i));</span><br><span class="line">                        field1.step();</span><br><span class="line">                        i++;</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125;</span><br><span class="line">      &#125;);    </span><br><span class="line">    &#125;;<span class="comment">//game</span></span><br><span class="line">      game.start();</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Data = Class.create(Sprite,&#123;</span><br><span class="line">          initialize: <span class="function"><span class="keyword">function</span><span class="params">()</span></span><br><span class="line">          </span>&#123;</span><br><span class="line">              Sprite.call(<span class="keyword">this</span>,<span class="number">32</span>,<span class="number">32</span>); <span class="comment">//スプライトの初期化 </span></span><br><span class="line">              <span class="keyword">this</span>.frame=<span class="number">0</span>;</span><br><span class="line">              <span class="keyword">this</span>.x=<span class="number">0</span>;</span><br><span class="line">              <span class="keyword">this</span>.y=<span class="number">0</span>;</span><br><span class="line">              <span class="keyword">this</span>.image = game.assets[<span class="string">'onoff.png'</span>]; <span class="comment">//画像の指定</span></span><br><span class="line">          &#125;,</span><br><span class="line">          set:<span class="function"><span class="keyword">function</span><span class="params">(num)</span></span><br><span class="line">          </span>&#123;</span><br><span class="line">              <span class="keyword">this</span>.frame= num;</span><br><span class="line">          &#125;</span><br><span class="line">&#125;);</span><br><span class="line">Field = Class.create(Sprite,&#123;</span><br><span class="line">    initialize:<span class="function"><span class="keyword">function</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.counter=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">this</span>.field = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">16</span>);</span><br><span class="line">        <span class="comment">/* 2次元配列の作成 */</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">this</span>.field[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">48</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* 2次元配列の値を代入*/</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>.field.length;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;<span class="keyword">this</span>.field[i].length;j++)&#123;</span><br><span class="line">                <span class="keyword">this</span>.field[i][j]=<span class="keyword">new</span> Data();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.show();</span><br><span class="line">    &#125;,</span><br><span class="line">    show:<span class="function"><span class="keyword">function</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> i,j;</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">48</span>;j++)&#123;</span><br><span class="line">              game.rootScene.addChild(<span class="keyword">this</span>.field[i][j]);</span><br><span class="line">              <span class="keyword">this</span>.field[i][j].x = <span class="number">32</span>*j;</span><br><span class="line">              <span class="keyword">this</span>.field[i][j].y = <span class="number">32</span>*i;</span><br><span class="line">            &#125;</span><br><span class="line">            j=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">this</span>.field[i][j].y = <span class="number">32</span>*i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    setValue:<span class="function"><span class="keyword">function</span><span class="params">(x,y,value)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.field[x][y].set(value);</span><br><span class="line">    &#125;,</span><br><span class="line">    setColumn:<span class="function"><span class="keyword">function</span><span class="params">(column,array)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">15</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">          <span class="keyword">this</span>.setValue(i,column,array[<span class="number">15</span>-i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//次のstepに遷移する。</span></span><br><span class="line">    step:<span class="function"><span class="keyword">function</span><span class="params">()</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.shiftField(<span class="string">"left"</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//フィ-ルド配列をシフト</span></span><br><span class="line">    shiftField:<span class="function"><span class="keyword">function</span><span class="params">(which)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> tmp=<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">16</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">            tmp[i] =<span class="keyword">new</span> Data();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(which==<span class="string">"left"</span>)&#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">                    <span class="keyword">this</span>.field[i].shift();</span><br><span class="line">                    <span class="keyword">this</span>.addFinalArray();</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(which==<span class="string">"right"</span>)&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//末尾にオブジェクト配列を追加する。</span></span><br><span class="line">    addFinalArray:<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">this</span>.field[i].push(<span class="keyword">new</span> Data());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//末尾の配列を変える。</span></span><br><span class="line">    changeFinalArray:<span class="function"><span class="keyword">function</span><span class="params">(array)</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">16</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">this</span>.setColumn(<span class="number">47</span>,array);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//16進数を2進数に変換し、それを配列にする。16bit</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">decode16to2</span><span class="params">(Pattern)</span></span>&#123;</span><br><span class="line">       <span class="comment">//0x0000~0xffffまでの16進数を入力</span></span><br><span class="line">       <span class="keyword">var</span> str = Pattern.toString(<span class="number">16</span>);</span><br><span class="line">       <span class="keyword">var</span> str_d=<span class="string">""</span>;<span class="comment">//decode済み文字列</span></span><br><span class="line">       str= addZero(str);</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;str.length;i++)&#123;</span><br><span class="line">           str_d = str_d + decode(str.charAt(i));</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> pickUp(str_d);    </span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//文字列を1つずつ取り出して数値(10進数)に変換し配列を返す。</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">pickUp</span><span class="params">(str)</span></span>&#123;</span><br><span class="line">       <span class="keyword">var</span> array = [];</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;str.length;i++)&#123;</span><br><span class="line">           array[i] = <span class="built_in">parseInt</span>(str.charAt(i),<span class="number">10</span>);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> array;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//4bitにする,文字列を返す。</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">addZero</span><span class="params">(str)</span></span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(str.length==<span class="number">1</span>)&#123;</span><br><span class="line">           str = <span class="string">"000"</span> + str;</span><br><span class="line">       &#125;<span class="keyword">else</span> <span class="keyword">if</span>(str.length==<span class="number">2</span>)&#123;</span><br><span class="line">           str = <span class="string">"00"</span> + str;</span><br><span class="line">       &#125;<span class="keyword">else</span> <span class="keyword">if</span>(str.length==<span class="number">3</span>)&#123;</span><br><span class="line">           str = <span class="string">"0"</span> + str;</span><br><span class="line">       &#125;<span class="keyword">else</span> <span class="keyword">if</span>(str.length==<span class="number">4</span>)&#123;     </span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> str;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//デコード:16進数を2進数に変換,文字列を返す。</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">decode</span><span class="params">(char)</span></span>&#123;</span><br><span class="line">       <span class="keyword">var</span> str;</span><br><span class="line">      <span class="keyword">switch</span>(char)&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"0"</span>:str=<span class="string">"0000"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"1"</span>:str=<span class="string">"0001"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"2"</span>:str=<span class="string">"0010"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"3"</span>:str=<span class="string">"0011"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"4"</span>:str=<span class="string">"0100"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"5"</span>:str=<span class="string">"0101"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"6"</span>:str=<span class="string">"0110"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"7"</span>:str=<span class="string">"0111"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"8"</span>:str=<span class="string">"1000"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"9"</span>:str=<span class="string">"1001"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"a"</span>:str=<span class="string">"1010"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"b"</span>:str=<span class="string">"1011"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"c"</span>:str=<span class="string">"1100"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"d"</span>:str=<span class="string">"1101"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"e"</span>:str=<span class="string">"1110"</span>;</span><br><span class="line">         <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">"f"</span>:str=<span class="string">"1111"</span>;</span><br><span class="line">         <span class="keyword">break</span>;   </span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> str;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//characterPattenをデコードさせるクッション</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">arrayConvert</span><span class="params">(array,i)</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> decode16to2(array[i]);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="comment">//stringを16進数の配列にする。2次元配列を返す。</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">stringPatternEncode</span><span class="params">(string)</span></span>&#123;</span><br><span class="line">        <span class="keyword">var</span> array=<span class="keyword">new</span> <span class="built_in">Array</span>(string.length);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;string.length;i++)&#123;</span><br><span class="line">            array[i] = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">16</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;string.length;i++)&#123;</span><br><span class="line">           array[i]=characterPattern(string.charAt(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> array;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="完成したもの">完成したもの</h4><p>デモの通りである.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://katsuobushifpga.github.io/2015/03/23/2015-03-23/" data-id="ci8wsdq5w0006ngjj13q715kk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-テスト" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/08/テスト/" class="article-date">
  <time datetime="2015-03-07T15:08:37.000Z" itemprop="datePublished">2015-03-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/08/テスト/">Hexoを導入してみました</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="なぜHexo?">なぜHexo?</h3><p> 自身のGitHubPagesを作成したは良いものの,綺麗なページが出来なくて困っていたところに,Hexoがでてきました.<br> 当初は,HTML5Initializrを使用して,bootstrapをうんたらかんたらして運用しようかと考えていました.<br> しかし,色々と手間が掛かりそうだったので,ブログっぽくしたほうが良いなと思いました.<br> そこで,「GitHubPages ブログ」などで検索してみると,Hexoの記事が出てきました.<br>記事を読むと,とても簡単に導入できるし,マークダウン使える,これでHexoを使おうと決めました.</p>
<h3 id="MarkDown">MarkDown</h3><blockquote><p>MarkDownとは,<br>文書を記述するための軽量マークアップ言語のひとつである。 「書きやすくて読みやすいプレーンテキストとして記述した文書を、妥当なXHTML(もしくはHTML)文書へと変換できるフォーマット」として、ジョン・グル―バー(John Gruber)とアーロン・スワーツ(Aaron Swartz)によって考案された。</p>
<footer><strong>wikipedia</strong><cite><a href="http://ja.wikipedia.org/wiki/Markdown" target="_blank" rel="external">MarkDown</a></cite></footer></blockquote>
<p>MarkDownは,HTMLタグのように,わざわざ囲むことはしなくてもいいので,完成した文章が見やすいです.<br>また,基本的な記法さえ覚えてしまえば,サクサク書けるので,まさに書きやすくて読みやすいものです.</p>
<h3 id="実践してみる">実践してみる</h3><p>基本となる見出し要素はこのように書きます.<br><figure class="highlight markdown"><figcaption><span>見出し</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="header"># おはよう </span></span><br><span class="line"><span class="header">## おはよう </span></span><br><span class="line"><span class="header">### おはよう </span></span><br><span class="line"><span class="header">#### おはよう</span></span><br></pre></td></tr></table></figure><br>HTMLだと下記のコードと等しいです.<br><figure class="highlight html"><figcaption><span>見出し</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">h1</span>&gt;</span>おはよう<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">h2</span>&gt;</span>おはよう<span class="tag">&lt;/<span class="title">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">h3</span>&gt;</span>おはよう<span class="tag">&lt;/<span class="title">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">h4</span>&gt;</span>おはよう<span class="tag">&lt;/<span class="title">h4</span>&gt;</span></span><br></pre></td></tr></table></figure><br>pタグのような段落要素は?<br><figure class="highlight markdown"><figcaption><span>段落</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">おはようございます.</span><br><span class="line">今日も一日頑張るぞい！</span><br></pre></td></tr></table></figure><br><figure class="highlight markdown"><figcaption><span>段落</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">p</span>&gt;</span></span>おはようございます.<span class="xml"><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">p</span>&gt;</span></span>今日も一日頑張るぞい！<span class="xml"><span class="tag">&lt;/<span class="title">p</span>&gt;</span></span></span><br></pre></td></tr></table></figure><br>リスト表記は?<br><figure class="highlight markdown"><figcaption><span>リスト</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>りんご</span><br><span class="line"><span class="bullet">- </span>バナナ</span><br><span class="line"><span class="bullet">- </span>ぶどう</span><br><span class="line"><span class="bullet">- </span>みかん</span><br></pre></td></tr></table></figure></p>
<figure class="highlight markdown"><figcaption><span>リスト</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">ul</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="title">li</span>&gt;</span></span>りんご<span class="xml"><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="title">li</span>&gt;</span></span>バナナ<span class="xml"><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="title">li</span>&gt;</span></span>ぶどう<span class="xml"><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="title">li</span>&gt;</span></span>みかん<span class="xml"><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h3 id="Markdownを使ったところ">Markdownを使ったところ</h3><ul>
<li>GitHub (READMEなど)</li>
<li>Gist</li>
<li>Reveal.js</li>
<li>Hexo</li>
</ul>
<h3 id="参考文献">参考文献</h3><p><a href="http://qiita.com/Id_Seth/items/b684cfabe0f2fde0c67b" target="_blank" rel="external">Markdown書き方メモ</a><br><a href="http://kojika17.com/2013/01/starting-markdown.html" target="_blank" rel="external">文章作成やメモ書きにも便利、Markdown記法</a><br><a href="http://tech.admax.ninja/2014/09/11/how-to-write-article-in-hexo/" target="_blank" rel="external">Hexoにおける記事の書き方</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://katsuobushifpga.github.io/2015/03/08/テスト/" data-id="ci8wsdq5m0000ngjjdu0y1khj" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Hexo/">Hexo</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OCaml/">OCaml</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Hexo/" style="font-size: NaNpx;">Hexo</a><a href="/tags/JavaScript/" style="font-size: NaNpx;">JavaScript</a><a href="/tags/OCaml/" style="font-size: NaNpx;">OCaml</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">4月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">3月 2015</a><span class="archive-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/04/25/2015-04-25/">2015-04-25</a>
          </li>
        
          <li>
            <a href="/2015/03/23/2015-03-23/">電光掲示板をenchant.jsでつくろう</a>
          </li>
        
          <li>
            <a href="/2015/03/08/テスト/">Hexoを導入してみました</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 katsuobushiFPGA<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>